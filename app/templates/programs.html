{% macro render_programs(programs, show_date, show_duration, show_rec_status, show_menu) %}
  <table class="table">
    <thead>
      <th>Title</th>
      <th>Episode</th>
      {% if show_date %}
        <th colspan="3">Date</th>
      {% endif %}
      {% if show_duration %}
        <th>Duration</th>
      {% endif %}
      {% if show_rec_status %}
        <th>Status</th>
      {% endif %}
    </thead>
    <tbody>
      {% for p in programs %}
        {% if p.recstatus is not none %}
          <tr>
            <td class="program_title" style="width: 300px">{{ p.title }}</td>
            <td style="width: 450px">
              {% if p.subtitle %}
                <span class="program_subtitle">{{ p.subtitle }}</span><br />
              {% endif %}
              {% if p.description %}
                <small>{{ p.description }}</small>
              {% endif %}
            </td>
            {% if show_date %}
              {% if p.startime is not none %}
                {% if p.starttime.date() == today %}
                  <td>Today</td>
                  <td>{{ p.starttime.strftime('%I:%M:%S %p') }}</td>
                  <td></td>
                {% else %}
                  <td>{{ p.starttime.strftime('%A') }}</td>
                  <td>{{ p.starttime.strftime('%I:%M:%S %p') }}</td>
                  <td>{{ p.starttime.strftime('%B %d, %Y') }}</td>
                {% endif %}
              {% else %}
                {% if p.progstart.date() == today %}
                  <td>Today</td>
                  <td>{{ p.progstart.strftime('%I:%M:%S %p') }}</td>
                  <td></td>
                {% else %}
                  <td>{{ p.progstart.strftime('%A') }}</td>
                  <td>{{ p.progstart.strftime('%I:%M:%S %p') }}</td>
                  <td>{{ p.progstart.strftime('%B %d, %Y') }}</td>
                {% endif %}
              {% endif %}
            {% endif %}
            {% if show_rec_status %}
              <td>
                {% if p.recstatus not in [2,3,4,8,11,12] %}
                  {{ p.recstatus }}
                {% endif %}
                {% if p.recstatus == 2 %}
                  Previously Recorded
                {% endif %}
                {% if p.recstatus == 3 %}
                  Recorded
                {% endif %}
                {% if p.recstatus == 4 %}
                  Earlier Showing
                {% endif %}
                {% if p.recstatus == 8 %}
                  Will Record Later Showing
                {% endif %}
                {% if p.recstatus == 11 %}
                  Never Record This Episode
                {% endif %}
                {% if p.recstatus == 12 %}
                  Recorder Offline
                {% endif %}
              </td>
            {% endif %}
            {% if show_duration %}
              <td>
                {{ (p.endtime - p.starttime) | string }}
              </td>
            {% endif %}
            {% if show_menu == 'delete_program' %}
              <td class="menucell" style="background-color:Gainsboro;width:3px;vertical-align:middle;align:center">
                <button onclick="clickDeleteButton(this, '{{ p.chanid }}', '{{ p.recstartts }}')" style="display:none;background-color:OrangeRed" class="btn btn-primary" data-toggle="modal" data-target="#modalDeleteProgram">
  Delete
</button>
              </td>
            {% endif %}
          </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
{% endmacro %}
